<div>
    <app-sidebar></app-sidebar> 
    <div class="mainpage">
        <div class="card-group">

            <div class="card text-black bg-secondary border-0">
                <div class="row">
                    <div class="col-sm-3">
                        <img class="card-img-top" src={{photoSrc}} class="rounded-circle"  width="100" height="110">          
                        <!-- <button mat-button class="mat-icon-button">  -->
                            ​<mat-icon (click)="open(content)">photo_camera</mat-icon>
                            <app-add-friend-button [friendshipStatus]="friendshipStatus"[friendRequest]="friendRequest" [friendId] = "user?.id" [callBack] ="addFriendCallBack.bind(this)" ></app-add-friend-button>
                            ​
                        <!-- </button>         -->
                    </div>
                    <div class="col-sm-8">
                        <div class="card-body">
                            <h5 class="card-title">{{user.firstName}} {{user.lastName}}</h5><br>
                            <div class="row" *ngIf="isOwnProfile">
                                <mat-icon class="col-md-6" (click)="open(aboutMe)">edit</mat-icon>
                                <h6 class="Card-text col-md-6" (click)="open(aboutMe)">About Me</h6> 
                            </div>
                            <div class="row" *ngIf="!isOwnProfile">
                                <h6 class="Card-text col-md-6">About Me</h6> 
                            </div>
                            <p *ngIf="isOwnProfile" (click)="open(aboutMe)">{{user.aboutMe}}</p>
                            <p *ngIf="!isOwnProfile">{{user.aboutMe}}</p>
                        </div>
                    </div> 
                </div>
            </div>        
               
            <div class="card text-black bg-secondary border-0">
                <div class="card-body">
                    <div class="row">
                        <mat-icon class="col-md-6">edit</mat-icon>
                        <h5 class="card-title col-md-8">Profile Information</h5>
                    </div>
                    <ul class="list-unstyled card-text">
                        <li>Birth Date: {{formattedBirthday}}</li>
                        <li>Email: {{user.email}}</li>
                        <li>Gender: {{user.gender}}</li>
                        <li>Mobile Number: {{user.mobileNumber}}</li>
                    </ul>
                </div>
            </div>

            <div class="card text-black bg-secondary border-0">
                <div class="card-body">
                    <h5 class="card-title">Albums</h5>
                </div>
            </div>
            
        </div>
        <div style=" background-color: lightgray;" *ngIf = "friendshipStatus == 'friends' || friendshipStatus == 'own'" >
            <div class="row rounded">
                <app-create-post timeline={{user.id}} class="col-sm-9 offset-md-2"[whenPost]="loadPage.bind(this)"></app-create-post>
            </div>
            <app-post *ngFor="let post of posts" [post] = "post">{{post.content}}</app-post>
            <div class="d-flex align-items-center" *ngIf ="isLoading">
                <strong>Loading...</strong>
                <div class="spinner-border ml-auto" role="status" aria-hidden="true"></div>
              </div>
              
        </div>
    </div>
</div>

<ng-template #content let-modal>
    <div class="modal-header">
        <h4 class="modal-title" id="modal-basic-title">Update your Profile Picture</h4>
        <button type="button" class="btn-close" aria-label="Close" (click)="modal.dismiss('Cross click')"></button>
    </div>
    <div class="modal-body">
        <img class="card-img-top" src={{photoSrc}} class="rounded-circle"  width="100" height="110">
        <app-photo></app-photo>
    </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-outline-dark" (click)="modal.close('Save click')">Close</button>
        <button type="button" class="btn btn-outline-dark" (click)="modal.close('Save click')">Upload</button>
    </div>
</ng-template>

<ng-template #aboutMe let-modal>
    <div class="modal-header">
        <h4 class="modal-title" id="modal-basic-title">Update your About Me</h4>
        <button type="button" class="btn-close" aria-label="Close" (click)="modal.dismiss('Cross click')"></button>
    </div>
    <div class="modal-body">
        <div class="form-group">
            <label for="AboutMe">About Me</label>
            <textarea class="form-control" id="aboutMe" rows="3" [(ngModel)]="user.aboutMe"></textarea>
          </div>
    </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-outline-dark" (click)="modal.close('Save click')">Close</button>
        <button type="button" class="btn btn-outline-dark" (click)="saveAboutMe()">Save</button>
    </div>
</ng-template>
